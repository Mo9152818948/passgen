<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø±Ù…Ø² Ø³Ø§Ø² bahrami</title>

<!-- PWA -->
<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#0f172a">

<style>
:root{
  --bg:#0b1220; --fg:#e5e7eb; --card:#0f172a; --muted:#1f2937; --btn:#16a34a; --btn-fg:#07110a;
}
*{box-sizing:border-box} body{margin:0; font-family: Vazirmatn,iransans,sans-serif; color:var(--fg); background:var(--bg); min-height:100vh;}
.container{max-width:860px;margin:24px auto;padding:16px}
.card{background:var(--card); border-radius:18px; box-shadow:0 10px 30px rgba(0,0,0,.25); padding:22px; backdrop-filter: blur(6px);}
h1{margin:0 0 12px; font-size:28px}
.row{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
label{display:inline-flex; align-items:center; gap:8px; font-size:14px}
input[type=number]{width:88px; padding:8px 10px; border-radius:10px; border:1px solid var(--muted); background:transparent; color:var(--fg)}
select{padding:9px 12px; border-radius:12px; border:1px solid var(--muted); background:transparent; color:var(--fg)}
button{border:none; border-radius:12px; padding:10px 14px; background:var(--btn); color:var(--btn-fg); cursor:pointer; font-weight:600}
button.secondary{background:transparent;color:var(--fg); border:1px solid var(--muted)}
.password{display:flex; justify-content:space-between; align-items:center; gap:8px; background:rgba(255,255,255,.06); padding:10px 12px; border-radius:12px; font-family:ui-monospace,monospace}
.password-actions{display:flex; gap:6px; flex-wrap:wrap}
.meter{height:8px; border-radius:6px; background:#111827; overflow:hidden; margin-top:8px}
.meter > span{display:block; height:100%; width:0%;}
.meter.w1 > span{width:33%; background:#ef4444}
.meter.w2 > span{width:66%; background:#f59e0b}
.meter.w3 > span{width:100%; background:#22c55e}
small.meter-label{opacity:.8}
.list{display:grid; gap:8px; margin-top:12px}
.tabs{display:flex; gap:8px; margin-top:10px}
.theme-light{--bg:#f8fafc; --fg:#0f172a; --card:#ffffff; --muted:#e2e8f0; --btn:#0f172a; --btn-fg:#ffffff;}
.theme-dark{--bg:#0b1220; --fg:#e5e7eb; --card:#0f172a; --muted:#1f2937; --btn:#16a34a; --btn-fg:#07110a;}
.theme-blue{--bg:#e6f0ff; --fg:#0b1a33; --card:#ffffff; --muted:#d9e6ff; --btn:#1d4ed8; --btn-fg:#ffffff;}
.theme-purple{--bg:#f5f0ff; --fg:#27104a; --card:#ffffff; --muted:#eadbff; --btn:#7c3aed; --btn-fg:#ffffff;}
.theme-gradient{--fg:#0f172a; --btn:#111827; --btn-fg:#ffffff;}
.theme-gradient body,.theme-gradient{background:linear-gradient(135deg,#2563eb 0%,#7c3aed 60%,#9333ea 100%) fixed;}
.bg-1{background:linear-gradient(135deg,#ffecd2 0%,#fcb69f 100%) fixed;}
.bg-2{background:linear-gradient(135deg,#a1c4fd 0%,#c2e9fb 100%) fixed;}
.bg-3{background:linear-gradient(135deg,#d4fc79 0%,#96e6a1 100%) fixed;}
.bg-4{background:linear-gradient(135deg,#fbc2eb 0%,#a6c1ee 100%) fixed;}
.bg-forest{background:url('https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=1280&q=80') center/cover fixed;}
@media (max-width:520px){ .row>*{flex:1 1 auto} h1{font-size:22px} }
</style>
</head>
<body class="theme-dark">
<div class="container">
  <div class="card">
    <h1>ğŸ” Ø±Ù…Ø² Ø³Ø§Ø² bahrami</h1>

    <!-- Ø¨Ø®Ø´ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ù…Ø² -->
    <div class="row">
      <label>Ø·ÙˆÙ„ Ø±Ù…Ø²: <input type="number" id="length" value="12" min="6" max="64"></label>
      <label>ØªØ¹Ø¯Ø§Ø¯ Ø®Ø±ÙˆØ¬ÛŒ: <input type="number" id="count" value="5" min="1" max="50"></label>
      <label>ØªÙ…:
        <select id="theme">
          <option value="dark">ØªÛŒØ±Ù‡</option>
          <option value="light">Ø±ÙˆØ´Ù†</option>
          <option value="blue">Ø¢Ø¨ÛŒ</option>
          <option value="purple">Ø¨Ù†ÙØ´</option>
          <option value="gradient">Ú¯Ø±Ø§Ø¯ÛŒØ§Ù†Øª</option>
        </select>
      </label>
      <button id="btnBg" class="secondary">ğŸŒ† Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡</button>
    </div>

    <div class="row">
      <label><input type="checkbox" id="lower" checked> Ø­Ø±ÙˆÙ Ú©ÙˆÚ†Ú©</label>
      <label><input type="checkbox" id="upper" checked> Ø­Ø±ÙˆÙ Ø¨Ø²Ø±Ú¯</label>
      <label><input type="checkbox" id="digits" checked> Ø§Ø¹Ø¯Ø§Ø¯</label>
      <label><input type="checkbox" id="symbols" checked> Ù†Ù…Ø§Ø¯Ù‡Ø§</label>
    </div>
    <div class="row">
      <label><input type="checkbox" id="noSimilar"> Ø­Ø°Ù Ù…Ø´Ø§Ø¨Ù‡â€ŒÙ‡Ø§</label>
      <label><input type="checkbox" id="noRepeat"> Ø¨Ø¯ÙˆÙ† ØªÚ©Ø±Ø§Ø±</label>
      <label><input type="checkbox" id="requireEach" checked> ÙˆØ¬ÙˆØ¯ Ø§Ø² Ù‡Ø± Ú¯Ø±ÙˆÙ‡</label>
    </div>

    <!-- Ø§ÛŒÙ…ÛŒÙ„ Gmail -->
    <div class="row">
      <label>Ø·ÙˆÙ„ Ø§ÛŒÙ…ÛŒÙ„: <input type="number" id="emailLen" value="10" min="6" max="30"></label>
      <label><input type="checkbox" id="emailDot" checked> Ù†Ù‚Ø·Ù‡ Ù…Ø¬Ø§Ø²</label>
      <button id="btnEmail" class="secondary">âœ‰ï¸ ØªÙˆÙ„ÛŒØ¯ Gmail</button>
    </div>

    <div class="row">
      <button id="btnGen">ğŸ² ØªÙˆÙ„ÛŒØ¯ Ø±Ù…Ø²</button>
      <button id="btnCSV" class="secondary">CSV</button>
      <button id="btnJSON" class="secondary">JSON</button>
      <button id="btnToggle" class="secondary">ğŸ‘ï¸ Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ</button>
      <button id="btnClear" class="secondary">ğŸ§¹ Ù¾Ø§Ú©â€ŒÚ©Ø±Ø¯Ù† ØªØ§Ø±ÛŒØ®Ú†Ù‡</button>
    </div>

    <div class="meter" id="strength"><span></span></div>
    <small id="strengthLabel" class="meter-label">Ù‚Ø¯Ø±Øª: â€”</small>

    <div class="tabs">
      <button id="tabLatest" class="secondary">Ø¢Ø®Ø±ÛŒÙ†â€ŒÙ‡Ø§</button>
      <button id="tabFav" class="secondary">â­ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</button>
    </div>

    <div id="output" class="list"></div>

    <!-- Ø§ÛŒÙ…ÛŒÙ„ Ù…ÙˆÙ‚Øª -->
    <hr style="border-color: rgba(255,255,255,.15); margin:18px 0">
    <h2>âœ‰ï¸ Ø§ÛŒÙ…ÛŒÙ„ ÛŒÚ©â€ŒØ¨Ø§Ø±Ù…ØµØ±Ù (Mail.tm)</h2>
    <div class="row">
      <button id="tmpCreate">Ø³Ø§Ø®Øª Ø§ÛŒÙ…ÛŒÙ„ Ù…ÙˆÙ‚Øª</button>
      <button id="tmpCopy" class="secondary" disabled>ğŸ“‹ Ú©Ù¾ÛŒ Ø¢Ø¯Ø±Ø³</button>
      <button id="tmpRefresh" class="secondary" disabled>ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</button>
    </div>
    <div class="password"><span id="tmpAddr">â€”</span></div>
    <small id="tmpStatus" class="meter-label">ÙˆØ¶Ø¹ÛŒØª: â€”</small>
    <div id="tmpInbox" class="list"></div>
  </div>
</div>

<script>
/* ===== Ø°Ø®ÛŒØ±Ù‡ Ø³Ø§Ø¯Ù‡ ===== */
const store = {
  get(k, d){ try{ return JSON.parse(localStorage.getItem(k)) ?? d; }catch{ return d; } },
  set(k, v){ localStorage.setItem(k, JSON.stringify(v)); }
};

/* ===== ØªÙ… ===== */
const THEME_KEY="theme", BG_KEY="bg";
const themeSelect=document.getElementById("theme");
function applyTheme(name){
  document.body.className="theme-"+name;
  store.set(THEME_KEY,name);
}
(function(){applyTheme(store.get(THEME_KEY,"dark")); themeSelect.value=store.get(THEME_KEY,"dark");})();
themeSelect.onchange=e=>applyTheme(e.target.value);

const BG_CLASSES=["bg-1","bg-2","bg-3","bg-4","bg-forest"];
let bgIndex=store.get(BG_KEY,-1);
function applyBg(i){document.body.classList.remove(...BG_CLASSES); if(i>-1)document.body.classList.add(BG_CLASSES[i]);}
applyBg(bgIndex);
btnBg.onclick=()=>{bgIndex=(bgIndex+1)%(BG_CLASSES.length+1); if(bgIndex===BG_CLASSES.length) bgIndex=-1; applyBg(bgIndex); store.set(BG_KEY,bgIndex);};

/* ===== Ø±Ù…Ø² ===== */
function rnd(max){const a=new Uint32Array(1);let r;do{crypto.getRandomValues(a);r=a[0];}while(r>=0xffffffff-max+1);return r%max;}
function pick(s){return s[rnd(s.length)];}
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=rnd(i+1);[a[i],a[j]]=[a[j],a[i]];}return a;}

const sets={lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",digits:"0123456789",symbols:"!@#$%^&*()_-+=[]{}|:;,.?/~`<>"},
      similar=new Set("Il1O0B8S5Z2");
function buildPool(o){let g=[]; if(o.lower)g.push(sets.lower); if(o.upper)g.push(sets.upper); if(o.digits)g.push(sets.digits); if(o.symbols)g.push(sets.symbols);
  if(o.noSimilar)g=g.map(s=>[...s].filter(c=>!similar.has(c)).join("")); return {groups:g,all:g.join("")};}
function genPass(o){const {groups,all}=buildPool(o); if(!all)return""; const L=o.length,chs=[]; if(o.requireEach)groups.forEach(g=>chs.push(pick(g))); while(chs.length<L){chs.push(pick(all));} return shuffle(chs).slice(0,L).join("");}
function scorePassword(p){if(!p)return 0;let s=0;const u=new Set(p).size;s+=Math.min(u*4,40);if(/[a-z]/.test(p))s+=10;if(/[A-Z]/.test(p))s+=10;if(/\d/.test(p))s+=10;if(/[^\w]/.test(p))s+=15;if(p.length>=12)s+=10;return Math.min(100,s);}
function updateMeter(p){const sc=scorePassword(p),m=document.getElementById("strength"),lab=document.getElementById("strengthLabel");m.className="meter "+(sc<40?"w1":sc<70?"w2":"w3");lab.textContent="Ù‚Ø¯Ø±Øª: "+(sc<40?"Ø¶Ø¹ÛŒÙ":sc<70?"Ù…ØªÙˆØ³Ø·":"Ù‚ÙˆÛŒ")+" ("+sc+"%)";}
function opts(){return{lower:lower.checked,upper:upper.checked,digits:digits.checked,symbols:symbols.checked,noSimilar:noSimilar.checked,noRepeat:noRepeat.checked,requireEach:requireEach.checked,length:+length.value};}
let last=[],hidden=store.get("hidden",false),favs=store.get("favs",[]),showFav=false;
function render(list){last=list;const d=showFav?list.filter(x=>favs.includes(x)):list;const out=document.getElementById("output");out.innerHTML="";d.forEach(x=>{const row=document.createElement("div");row.className="password";const span=document.createElement("span");span.textContent=hidden?"â€¢".repeat(x.length):x;span.dataset.real=x;const actions=document.createElement("div");actions.className="password-actions";const btnCopy=document.createElement("button");btnCopy.className="secondary";btnCopy.textContent="ğŸ“‹";btnCopy.onclick=()=>navigator.clipboard.writeText(x);const btnFav=document.createElement("button");btnFav.className="secondary";btnFav.textContent=favs.includes(x)?"â­":"â˜†";btnFav.onclick=()=>{if(favs.includes(x))favs=favs.filter(i=>i!==x);else favs.push(x);store.set("favs",favs);render(list);};actions.append(btnCopy,btnFav);row.append(span,actions);out.appendChild(row);});updateMeter(list[0]||"");}
btnGen.onclick=()=>{const c=Math.min(100,+count.value);const o=opts();const arr=[];for(let i=0;i<c;i++)arr.push(genPass(o));render(arr);}
btnEmail.onclick=()=>{const c=Math.min(100,+count.value);let L=Math.max(6,Math.min(30,+emailLen.value));const arr=[];for(let i=0;i<c;i++){let s="";for(let j=0;j<L;j++)s+=pick("abcdefghijklmnopqrstuvwxyz0123456789"+(emailDot.checked?".":""));arr.push(s+"@gmail.com");}render(arr);}
btnToggle.onclick=()=>{hidden=!hidden;store.set("hidden",hidden);render(last);}
btnClear.onclick=()=>render([]);

/* ===== Ø§ÛŒÙ…ÛŒÙ„ Ù…ÙˆÙ‚Øª (Mail.tm) ===== */
const mailApi="https://api.mail.tm";let mtm={token:null,address:null};
async function mtmFetch(path,opts={}){const h=opts.headers||{};if(mtm.token)h.Authorization="Bearer "+mtm.token;if(opts.body&&!h["Content-Type"])h["Content-Type"]="application/json";const r=await fetch(mailApi+path,{...opts,headers:h});if(!r.ok)throw 0;return r.json();}
async function mtmCreate(){setTmpStatus("Ø¯Ø± Ø­Ø§Ù„ Ø³Ø§Ø®Øª...");const d=await mtmFetch("/domains");const domain=d["hydra:member"][0].domain;const id=Math.random().toString(36).slice(2,10);const addr=id+"@"+domain;const pass=Math.random().toString(36);await mtmFetch("/accounts",{method:"POST",body:JSON.stringify({address:addr,password:pass})});const t=await mtmFetch("/token",{method:"POST",body:JSON.stringify({address:addr,password:pass})});mtm={token:t.token,address:addr};tmpAddr.textContent=addr;tmpCopy.disabled=false;tmpRefresh.disabled=false;setTmpStatus("Ø§ÛŒÙ…ÛŒÙ„ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯.");mtmRefresh();}
async function mtmRefresh(){if(!mtm.token)return;setTmpStatus("Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ...");const m=await mtmFetch("/messages");renderInbox(m["hydra:member"]);setTmpStatus("ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø±ÙˆØ² Ø´Ø¯.");}
function renderInbox(items){tmpInbox.innerHTML="";if(!items.length){tmpInbox.innerHTML="<div class='password'>ØµÙ†Ø¯ÙˆÙ‚ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</div>";return;}items.forEach(x=>{const row=document.createElement("div");row.className="password";row.innerHTML=`<div><b>${x.subject||"(Ø¨Ø¯ÙˆÙ† Ù…ÙˆØ¶ÙˆØ¹)"}</b> â€” ${x.from.address||""}</div>`;tmpInbox.appendChild(row);});}
function setTmpStatus(t){tmpStatus.textContent="ÙˆØ¶Ø¹ÛŒØª: "+t;}
tmpCreate.onclick=()=>mtmCreate().catch(()=>setTmpStatus("Ø®Ø·Ø§"));tmpCopy.onclick=()=>navigator.clipboard.writeText(mtm.address);tmpRefresh.onclick=mtmRefresh;
</script>
</body>
</html>
