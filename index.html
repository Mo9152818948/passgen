<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>رمزساز bahrami</title>
<meta name="theme-color" content="#0f172a" />

<link rel="manifest" href="manifest.webmanifest" />

<style>
  :root{
    --bg:#0b1220; --fg:#e5e7eb; --muted:#93a3b3;
    --card:#0f172a; --accent:#34c759; --accent-2:#1e90ff;
    --danger:#ef4444; --ok:#22c55e; --shadow:0 10px 30px rgba(0,0,0,.25);
    --radius:20px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh; font-family: Vazirmatn, iransans, system-ui, -apple-system, Segoe UI, Roboto;
    color:var(--fg); background:
      radial-gradient(1200px 800px at 80% -20%, #16325c 0%, transparent 60%),
      radial-gradient(900px 700px at -10% 110%, #133b2e 0%, transparent 55%),
      linear-gradient(180deg,#0a1220 0%, #0b1220 100%);
  }
  .wrap{max-width:980px; margin:28px auto 60px; padding:0 16px}
  header{
    display:flex; align-items:center; justify-content:space-between;
    gap:16px; margin-bottom:18px;
  }
  .brand{
    display:flex; align-items:center; gap:10px; font-weight:800; font-size:24px;
  }
  .brand .lock{
    width:28px; height:28px; display:inline-grid; place-items:center;
    background:linear-gradient(135deg,#21d07a,#0aa94f);
    color:#0b1220; border-radius:10px; box-shadow:var(--shadow);
  }

  /* iOS switch */
  .ios-switch{ position:relative; display:inline-block; width:52px; height:28px }
  .ios-switch input{ opacity:0; width:0; height:0 }
  .slider{
    position:absolute; inset:0; cursor:pointer; background:#c7ced6;
    border-radius:34px; transition:.35s ease;
    box-shadow: inset 0 2px 6px rgba(0,0,0,.25);
  }
  .slider:before{
    content:""; position:absolute; left:3px; bottom:3px; width:22px; height:22px;
    background:#fff; border-radius:50%; transition:.35s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,.35);
  }
  .ios-switch input:checked + .slider{ background:var(--accent) }
  .ios-switch input:checked + .slider:before{ transform:translateX(24px) }

  .seg-label{ font-size:12px; color:var(--muted); margin-right:10px; user-select:none }

  /* cards & layout */
  .card{
    background:rgba(15, 23, 42, .85); border:1px solid rgba(255,255,255,.06);
    border-radius:var(--radius); box-shadow:var(--shadow); padding:18px;
  }
  .row{ display:flex; gap:12px; flex-wrap:wrap; align-items:center }
  .row > * { flex: 1 1 auto }

  .input, select{
    width:100%; padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.08);
    background:transparent; color:var(--fg); outline:none;
  }
  .btn{
    padding:12px 16px; border-radius:12px; border:1px solid rgba(255,255,255,.08);
    background:linear-gradient(135deg,#21d07a,#0aa94f); color:#07210f;
    font-weight:700; cursor:pointer; transition:transform .05s ease;
  }
  .btn:active{ transform:translateY(1px) }
  .btn.ghost{ background:transparent; color:var(--fg) }
  .muted{ color:var(--muted) }

  .list{ display:grid; gap:10px; margin-top:16px }
  .item{
    display:flex; align-items:center; gap:10px; justify-content:space-between;
    background:#0e1930; border:1px solid rgba(255,255,255,.06);
    border-radius:14px; padding:12px 14px;
  }
  .chip{ padding:6px 10px; border-radius:999px; font-size:12px; background:#0b1a2f; color:#93e5b4; border:1px solid rgba(255,255,255,.08) }

  .strength{height:10px; border-radius:999px; background:#172033; overflow:hidden}
  .bar{height:100%; width:0%; background:linear-gradient(90deg,#ff6b6b,#ffd166,#34c759); transition:width .3s ease}

  /* pages */
  .page{
    display:none; transform-origin:center; animation:.25s fade-up both;
  }
  .page.active{ display:block }
  @keyframes fade-up{ from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none} }

  footer{ margin-top:20px; text-align:center; font-size:12px; color:var(--muted) }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <span class="lock">🔒</span>
        <span>bahrami رمزساز</span>
      </div>
      <div class="row" style="flex-wrap:nowrap; gap:8px">
        <span class="seg-label">رمزساز</span>
        <label class="ios-switch" title="تغییر بخش">
          <input id="switcher" type="checkbox" />
          <span class="slider"></span>
        </label>
        <span class="seg-label">ایمیل موقت</span>
      </div>
    </header>

    <!-- PAGE: PASSWORDS -->
    <section id="page-pass" class="page active">
      <div class="card" style="margin-bottom:14px">
        <div class="row">
          <div style="flex:0 0 120px">
            <label class="muted" for="len">طول رمز</label>
            <input id="len" class="input" type="number" min="6" max="64" value="12" />
          </div>
          <div style="flex:0 0 120px">
            <label class="muted" for="cnt">تعداد</label>
            <input id="cnt" class="input" type="number" min="1" max="20" value="5" />
          </div>
          <div class="chip"><label><input id="optLower" type="checkbox" checked /> حروف کوچک</label></div>
          <div class="chip"><label><input id="optUpper" type="checkbox" checked /> حروف بزرگ</label></div>
          <div class="chip"><label><input id="optNum"   type="checkbox" checked /> اعداد</label></div>
          <div class="chip"><label><input id="optSym"   type="checkbox" /> نمادها</label></div>
          <div class="chip"><label><input id="optNoAmb" type="checkbox" /> حذف مشابه‌ها</label></div>
          <div class="chip"><label><input id="optNoDup" type="checkbox" /> بدون تکرار</label></div>
        </div>
        <div class="row" style="margin-top:12px">
          <button id="btnGen" class="btn">🎲 تولید رمز</button>
          <button id="btnClear" class="btn ghost">🧹 پاک‌کردن</button>
        </div>
        <div style="margin-top:14px">
          <div class="muted" style="margin-bottom:6px">قدرت:</div>
          <div class="strength"><div id="bar" class="bar"></div></div>
        </div>
      </div>

      <div class="card">
        <div class="muted" style="margin-bottom:10px">خروجی‌ها</div>
        <div id="list" class="list"></div>
      </div>
    </section>

    <!-- PAGE: TEMP MAIL (demo) -->
    <section id="page-mail" class="page">
      <div class="card">
        <h3 style="margin:0 0 8px">ایمیل یک‌بارمصرف (دمو)</h3>
        <p class="muted" style="margin:0 0 16px">
          این یک صفحه‌ی نمایشی است تا فقط سوییچ و جداسازی کامل بخش‌ها را ببینی.
          اگر اوکی بود، همین ساختار را به mail.tm یا سرویس دلخواهت وصل می‌کنم تا
          ایمیل بسازی و صندوق را بخوانی.
        </p>

        <div class="row">
          <input id="demoEmail" class="input" readonly value="temp-xyz@mail.example" />
          <button class="btn" onclick="copy('#demoEmail')">کپی</button>
        </div>

        <div style="margin-top:16px" class="muted">صندوق (نمایشی):</div>
        <div class="list" style="margin-top:8px">
          <div class="item"><span>Welcome 🎉</span><button class="btn ghost" disabled>بازکردن</button></div>
          <div class="item"><span>Security code: 823914</span><button class="btn ghost" disabled>کپی کد</button></div>
        </div>
      </div>
    </section>

    <footer>© 2025 – Bahrami • UI با سوییچ iOS و جداسازی کامل صفحات</footer>
  </div>

<script>
  // --- Switch pages ---
  const switcher = document.getElementById('switcher');
  const pagePass = document.getElementById('page-pass');
  const pageMail = document.getElementById('page-mail');

  switcher.addEventListener('change', () => {
    if (switcher.checked) {
      pagePass.classList.remove('active');
      pageMail.classList.add('active');
      window.scrollTo({top:0, behavior:'smooth'});
    } else {
      pageMail.classList.remove('active');
      pagePass.classList.add('active');
      window.scrollTo({top:0, behavior:'smooth'});
    }
  });

  // --- Password generator ---
  const amb = "Il1O0oB8G6S5Z2";
  const lowers = "abcdefghijklmnopqrstuvwxyz";
  const uppers = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  const nums   = "0123456789";
  const syms   = "!@#$%^&*()_+-=[]{};:,.?/~";

  function rand(n){ return Math.floor(Math.random()*n) }
  function shuffle(s){ return s.split('').sort(()=>Math.random()-0.5).join('') }

  function buildPool() {
    let pool = "";
    if (optLower.checked) pool += lowers;
    if (optUpper.checked) pool += uppers;
    if (optNum.checked)   pool += nums;
    if (optSym.checked)   pool += syms;
    if (optNoAmb.checked) pool = pool.split('').filter(ch => !amb.includes(ch)).join('');
    return pool;
  }

  function uniqueChars(str){
    return new Set(str.split('')).size === str.length;
  }

  function genOne(len){
    let pool = buildPool();
    if (!pool) return "";
    // تضمین حضور حداقل از هر گروه انتخاب‌شده
    let must = "";
    if (optLower.checked) must += lowers[rand(lowers.length)];
    if (optUpper.checked) must += uppers[rand(uppers.length)];
    if (optNum.checked)   must += nums[rand(nums.length)];
    if (optSym.checked)   must += syms[rand(syms.length)];

    let out = must;
    while (out.length < len){
      const ch = pool[rand(pool.length)];
      if (optNoDup.checked && out.includes(ch)) continue;
      out += ch;
    }
    out = shuffle(out).slice(0,len);
    if (optNoDup.checked && !uniqueChars(out)) return genOne(len); // تکرار نداشتن
    return out;
  }

  function strengthScore(len, sets){
    // خیلی ساده: طول + تعداد گروه‌های فعال
    return Math.min(100, Math.round((len/20)*60 + sets*10 + (optNoDup.checked?10:0)));
  }

  // DOM refs
  const len = document.getElementById('len');
  const cnt = document.getElementById('cnt');
  const optLower = document.getElementById('optLower');
  const optUpper = document.getElementById('optUpper');
  const optNum   = document.getElementById('optNum');
  const optSym   = document.getElementById('optSym');
  const optNoAmb = document.getElementById('optNoAmb');
  const optNoDup = document.getElementById('optNoDup');

  const list = document.getElementById('list');
  const bar  = document.getElementById('bar');
  const btnGen = document.getElementById('btnGen');
  const btnClear = document.getElementById('btnClear');

  function updateStrength(){
    const sets = [optLower.checked,optUpper.checked,optNum.checked,optSym.checked].filter(Boolean).length;
    const s = strengthScore(+len.value, sets);
    bar.style.width = s + "%";
  }
  [len,optLower,optUpper,optNum,optSym,optNoDup].forEach(el => el.addEventListener('input', updateStrength));
  updateStrength();

  function addItem(txt){
    const row = document.createElement('div');
    row.className = 'item';
    const span = document.createElement('span');
    span.style.direction = 'ltr';
    span.style.userSelect = 'all';
    span.textContent = txt;
    const actions = document.createElement('div');
    actions.style.display='flex'; actions.style.gap='8px';
    const b1 = document.createElement('button'); b1.className='btn ghost'; b1.textContent='⭐';
    b1.title='علاقه‌مندی'; b1.onclick=()=>{b1.textContent = (b1.textContent==='⭐'?'★':'⭐')}
    const b2 = document.createElement('button'); b2.className='btn'; b2.textContent='کپی';
    b2.onclick=()=>navigator.clipboard.writeText(txt);
    actions.append(b1,b2);
    row.append(span,actions);
    list.prepend(row);
  }

  btnGen.addEventListener('click', ()=>{
    list.innerHTML = "";
    const n = Math.max(1, Math.min(20, +cnt.value||5));
    const l = Math.max(6, Math.min(64, +len.value||12));
    for (let i=0;i<n;i++) addItem(genOne(l));
  });

  btnClear.addEventListener('click', ()=>{ list.innerHTML=""; });

  // util copy
  window.copy = (sel)=>{
    const el = document.querySelector(sel);
    if (!el) return;
    navigator.clipboard.writeText(el.value||el.textContent||"");
  }
</script>
</body>
</html>
